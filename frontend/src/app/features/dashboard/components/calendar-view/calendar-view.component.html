<div class="calendar-container">
  <div class="header">
    <h1>Calendar View</h1>
    <mat-form-field appearance="outline">
      <mat-label>Year</mat-label>
      <input matInput type="number" [value]="selectedYear" (change)="onYearChange($any($event.target).value)" min="2020" max="2030">
    </mat-form-field>
  </div>
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>
  <div *ngIf="!loading && calendarData" class="calendar-grid">
    <mat-card *ngFor="let month of [1,2,3,4,5,6,7,8,9,10,11,12]" class="month-card">
      <mat-card-header>
        <mat-card-title>{{ getMonthName(month) }} {{ selectedYear }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <table class="calendar-table">
          <thead>
            <tr>
              <th *ngFor="let day of getDaysOfWeek()">{{ day }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let week of getWeeksForMonth(month)">
              <td *ngFor="let day of week" 
                  [class]="getCellClass(day)"
                  [class.empty]="!day"
                  [class.clickable]="day && day.hasMeals"
                  (click)="onDayClick(day)">
                <div *ngIf="day" class="day-cell">
                  <div class="day-number">{{ getDayNumber(day) }}</div>
                  <div *ngIf="day.hasMeals && day.caloryCons && day.caloryCons > 0" class="day-calories">
                    {{ day.caloryCons | number:'1.0-0' }} kcal
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </mat-card-content>
    </mat-card>
  </div>
</div>
